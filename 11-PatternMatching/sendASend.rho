new result, patternMatcher in {

  for (x <= patternMatcher) {
   match *x {
    Nil               => result!("Got the stopped process")
    {_!(_)}           => result!("Got a send")
    {for(@0 <- _){_}} => result!("Got a receive on @0")
    _                 => result!("Got something else")
   }
  }
  |

  // Make sure the pattern matcher works
  patternMatcher!({for(@0 <- @0){0}})
  |
  patternMatcher!({@"world"!("hello")})
  |
  patternMatcher!({0|"hello"})
  |
  patternMatcher!(Nil)
}
