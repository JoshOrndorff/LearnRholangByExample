# Pattern Matching

## About Patterns
패턴은 일상생활에서 발생한다. 만약 당신이 이전에 결코 보지 못했던 새로운 차종을 보았다면 그것은 아마도 4개의 바퀴, 2개 또는 4개의 문, 그리고 밖으로 내다볼 수 있는 앞유리에 대한 당신의 정신적인 패턴과 맞기 때문에 그것은 자동차라는 것을 알 것이다.

비슷하게, 우리는 문장의 패턴을 일치시킬 수 있다. "나는 치즈를 좋아한다"와 "팬더를 좋아한다"는 문장은 모두 "나는 ____"의 패턴과 일치한다. 그러나 "나는 개를 가지고 있다"는 문장과 일치하지 않는다. Rholang은 프로그래머들이 프로그램 실행을 제어하기 위해 패턴 매칭을 사용할 수 있도록 한다. 즉, 공정이 특정 패턴과 일치하는지 여부에 따라 다른 코드가 실행될 수 있다.

## 경기 구성
Rholang이 패턴 매칭을 사용하는 가장 분명한 장소는 여기 보이는 것처럼 동작하는 '매치' 구조다.

[매칭.rho]rho)

이 코드에서 '패턴매처' 채널에서 접수한 모든 마사지 'x'는 인용된 과정을 나타낸다. 우리는 아래의 여러 패턴과 그 과정을 비교하고 어떤 패턴이 일치하는지 다시 보고한다. 밑줄은 그저 빈칸에 채워져 있고 어떤 패턴과도 잘 어울린다. 그것은 "와일드카드"라고 불리며, 당신은 종종 그것을 "매치" 구조에서 마지막 패턴으로 볼 것이다.

<!>](lookingForMessagesPatternMatching.png)->

'for'나 'contract'로 메시지를 받을 때도 패턴 매칭을 사용할 수 있다. 메시지를 수신하려면 보낸 메시지가 수신될 패턴과 일치해야 한다. 우리는 곧 이 용어의 예를 볼 것이다.

## 우리가 본 두 사건
우리는 이미 밑줄을 가끔 사용해 왔다. 예를 들어 나는 종종 work 채널에서 any_ 패턴과 일치하는 메시지를 수신한다는 뜻의 for (_ <-ck)를 쓴다. 메시지를 받았을 때만 메시지를 받았을 때, 그리고 무슨 메시지를 받았는지 신경을 쓸 때 밑줄을 사용하는 것이 일반적인 관행이다.

우리는 또한 이전 수업에서 프로세스 수신 방법을 배울 때 패턴 매칭을 사용했다. for (@p <- x)를 쓰면 인용된 공정의 패턴과 일치하는 메시지를 수신하고, 인용된 공정을 p에 바인딩한다는 뜻이다.

변수 p는 x에서 무엇을 묶을 것인가!("안녕") |(@p <- x){Nil}"용
- [ ] @"hello".
- [x] '헬로'
- [ ] '안녕'
- [ ] `4`

변수 p는 x에서 무엇을 묶을 것인가!("안녕" | 4) | for (@{"hello" | p} <- x){Nil}".
- [ ] @"hello".
- [ ] "안녕"
- [ ] '안녕'
- [x] '4'

## Syntactic sugar
야, 통설탕. 이제 곱슬곱슬한 치열교정기로.(설탕).png)
앞에서 배운 'if'/'else' 구조를 완전히 대체하기 위해 패턴 매칭을 사용할 수 있는 것으로 밝혀졌다. 사실 그것이 바로 'if'/'else'가 후드 아래에서 의미하는 것이다. 다른 구문의 경우 속기 때문에 'if'/'else'는 통사당이라고 한다. 다음 코드 조각은 정확히 동일하다.
```
if (cond) {
  // 프로세스 P
}
다른 {
  // 프로세스 Q 수행
}
```
안으로
```
일치 조건 {
  True => // 프로세스 P
  false => // 프로세스 Q
}
```

### Exercise
이전 수업에서 본 'SignTest.rho'의 예를 다시 써서 달콤한 'if'/else 대신 'match'를 사용하십시오.

위의 첫 번째 시합 예제를 어떻게 다시 써서 'if'/'else'를 사용할 수 있을까?
- [ ] 이전 연습의 역순
- [ ] if (x = a)로 시작
- [x] 그 예가 단순한 '참'과 '거짓'보다 더 복잡한 패턴과 일치하기 때문에 가능하지 않다.


## 니커 그리스어
우리 이름을 말하지 않아도 인사할 수 있는 좀 더 나은 사람을 만들어 보자. 여기서 중요한 것은 우리가 똑같은 '더 좋은' 채널에서 청취하는 두 가지 계약을 체결하고 있다는 점이다.
[greet2.rho]rho)

당신은 아마도 어떻게 각각의 계약이 개별적으로 작용하는지 이해할 수 있을 것이다. 흥미로운 새로운 부분은 Rholang이 메시지가 '더 좋은' 채널에 전달될 때 실제로 어떤 계약을 할지 결정하는 방법이다. 비결은 Rholang이 우리가 보낸 패턴과 일치하는 매개변수를 가진 어떤 계약이든 실행할 것이라는 것이다. 내가 두 개의 변수를 보내면, 두 개의 변수를 갖는 녹색을 더 부르게 될 것이다. 내가 만약 하나의 파라미터만 보내면, 하나의 파라미터만 받는 계약은 호출될 것이다. 앞으로 rholang은 전송된 매개변수의 _유형_에서 일치하는 패턴을 지원할 것이다.

### Exercise
직사각형의 면적을 계산하는 일련의 계약서를 작성하라. 가장 분명한 경우, 발신자는 길이와 너비를 모두 제공할 것이다. 그러나 사용자는 직사각형의 폭이 정사각형이고 양쪽이 제공된 너비인 단일 너비만 제공할 수 있다. 마지막으로 사용자는 직사각형의 크기가 1x1인 경우 전혀 치수를 제공할 수 없다.

## 고급 패턴 매칭
채널 'x'에서 보내는 프로세스가 단일 전송 패턴과 일치할 때에만 줄일 수 있는 for(@{x!(P)} '- y){ Q }'와 같은 패턴 매칭으로 멋진 일을 할 수 있다. 그런 다음 Q 프로세스에서는 변수 x, 채널, P를 바인딩하여 전송 중인 프로세스를

[SendASend.rho](SendASend.rho)

윌x!("안녕" | ("안녕") | "세계"}<- x){Nil}"이(가) 통신 이벤트를 발생시키는가?
- [ ] 예, 송신과 수신이 같은 채널에 있기 때문에
- [ ] 예, 송신과 수신이 같은 채널에 있고 패턴이 일치하므로
- 송신과 수신이 서로 다른 채널에 있기 때문에 [ ] No
- [x] 송신과 수신이 동일한 채널에 있지만 패턴이 일치하지 않기 때문에 [x

## Unions and Intersections

두 패턴 중 하나를 일치시키고 싶거나 두 패턴을 모두 일치시키고 싶을 때가 있을 수 있다. 이 수술들은 우리가 지난 수업에서 논의했던 부울스와 비슷하게 느껴지지만, 우리는 패턴 매칭 시 다른 연산자를 사용한다.

여러 패턴 중 하나를 일치시키려면 "유니언" 연산자 "\/"를 사용하십시오.

[유니온.rho] (유니언)rho)

두 가지 패턴을 모두 맞추려면 '교차' 연산자/\를 사용하십시오. 이 예에서 우리는 등록 데이터가 유효한지 검증하고 있다. 등록자는 자신의 이름과 나이를 제공해야 하며, 추가 자료를 제공할 수 있다. 그런데, 키 값 데이터를 저장하는 이 기법은 종종 "RHOCore"라고 알려져 있다.

[교차.rho]rho)

### Exercise
여기 노조의 사례는 꽤 기본적이다. 더 많은 언어와 단어와 일치할 수 있도록 확장하십시오. 또한 기본 패턴만 일치할 때 어떤 일이 일어나는지 보여주는 테스트를 작성한다.

이 절에서 논한 논리 연계는 본 자습서의 범위를 벗어나는 바인딩과 관련된 몇 가지 미묘한 행동을 가지고 있다. 나는 당신이 예제 프로그램으로 실험할 것을 권하고, 그것이 사용 가능해지면, Rholang 설명서를 참조하라.

## 번들에 대한 추가 정보
몇 가지 교훈은 읽기 전용 또는 쓰기 전용 채널을 만들기 위해 번들을 사용할 수 있는 방법에 대해 논의한 것이었습니다. 하지만 우리는 아직 그들의 이름있는 특징에 대해 논의하지 않았다. 번들은 패턴 매칭으로 분리되지 않도록 복합 이름들을 "분쇄"하기 위해 사용될 수 있다.

이 예제 코드에서 군대는 미사일을 가지고 있고 그들은 용서할 수 없는 이름으로 능력을 쌓음으로써 미사일 발사를 통제한다. 외교 관계 때문에, 군대는 국민들이 미사일의 안전을 위해 사찰을 할 수 있도록 허용할 것이지만, 확실히 그것을 발사하지는 않을 것이다.

[missileUnsafe.rho] (missileUnsafe).rho)

### Exercise
군대는 여기서 끔찍한 실수를 저질렀고 누구든지 그들의 미사일을 발사할 수 있다. 외부가 이 미사일을 발사할 수 있는 방법을 생각해 봐.

답변:
[missileAttack.rho] (missileAttack).rho)

이 문제를 해결하기 위해 군대는 패턴 매칭으로 분리되지 않도록 혼합 이름의 번들로 된 버전을 제공한다.

[missileSafe.rho](missileSafe.rho)

안전 코드에서 공격이 실행될 때 출력되는 항목은?
- [ ] "시작하는 중..."
- [ ] "검토 중..."
- [ ] "실행 실패"."
- [x] 없음