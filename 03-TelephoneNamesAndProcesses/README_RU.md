# Сломанный телефон, Имена и Процессы

## Передаём сообщения дальше


![The game of telephone is perfect to simulate message forwarding in rholang.](telephone.png)



В предыдущем уроке мы научились отправлять сообщение бабушке или пиццерии. Но пока что получатели только подтверждали получение, выводя сообщение на стандартный вывод.

Давайте теперь попробуем передавать сообщения дальше, как в игре "Сломанный телефон".

[telephone3.rho](telephone3.rho)

Как мы уже не раз говорили, эксперимент - лучшая форма обучения. Попробуйте поменять части программы на ваш вкус.

### Упражнение

Первый рауд "сломанного телефона" удался, то будет интересней, если у нас будет больше игроков. Давайте добавим третьего игрока -- Чарли. Боб вместо того, чтобы вывести сообщение на `stdout`, передаст его новому игроку. А затем Чарли напечатает его. Чем больше народу, тем веселей!



![The message never seems to get there correctly. I blame Bob.](telephoneChangedMessage.png)



### Упражнение
Если вы когда-нибудь играли в сломанный телефон, то вы в курсе, что сообщения редко когда доходят в целости. Боб решил передать неправильное сообщение. Измените программу, чтобы она передавала от Боба другое сообщение, не зависящее от полученного.


## Что такое эта `*`?

![Opposites attract](inverse.png)

Вы заметили `*` в `@"Bob"!(*message)`? В ро есть два типа объектов "имена" и "процессы". И есть способы превращать одно в другое и обратно.

<!-- TODO: Maybe an illustration of arrows labeled * and @ would be better here? -->

"Процесс" -- любой кусок кода на ро. Например, наша игра в сломанный телефон или пиццерия из предыдущих уроков. Процессы могуть быть программами на сотни строк или кусочками на одну строчку. Они даже могут быть крошечными фрагментами кода, которые представляют собой значения. Вот примеры процессов:

 - `result!("Sup Rholang?")` Обычная отправка
 - `Nil` Наименьший возможный процесс. Он буквально значит "ничего не делать".
 - `for(msg <- @"phone"){Nil}` Обычное получение, которые ничего не делает, когда поступает сообщение.
 - `"Hello World"` Ещё один маленький процесс, который ничего не делает. Такие процессы называются "базовыми выражениями" ("Ground Terms").


"Имя" -- нечто, что можно использовать как канал для передачи сообщений. В большинстве языков программирования, имена -- отдельные сущности, существующие сами по себе. В ро имена получаются в результате "цитирования процессов"("quoting processes") при помощи добавления перед процессом знака`@`. Вот некоторые примеры имен:

 - `@"Hello World"` Получено после цитирования базового выражения "Hello World".
 - `@Nil` Наименьшее возможное имя. Получено после цитирования наименьшего возможного процесса.
 - `@(@"Alice"!("I like rholang, pass it on."))` Получено после цитирования процесса из нашей игры про телефон.



## И зачем нам нужна эта `*`?


![What kind of name is that!? Did your parents just name you after some computer code?](myNameIs.png)

Мы можем запаковать процесс и превратить его в имя, процитировав его при помощи знака `@`. Мы также можем проделать обратную операцию и превращать имена в процессы при помощи символа `*`.

Самое важное, что нужно запомнить: в ро мы <strong>отправляем процессы и получаем имена</strong>. Это настолько важно, что стоит повторить. Мы всегда <strong>отправляем процесс</strong> и, с другой стороны, всегда <strong>получаем имя</strong>.

Когда Алиса получает наше сообщение при помощи `for(message <- @"Alice")`, то она -- на принимающей стороне. Т.е.`message` становится именем. Когда она позже отправляет его Бобу, то она должна отправить процесс. И она использует `*`, чтобы превратить `message` обратно в процесс при помощи `@"Bob"!(*message)`.



## Тест

Что мы отправляем?
- [x] процессы
- [ ] имена



Что мы получаем?
- [ ] процессы
- [x] имена


Что такое `@"registration"`?
- [ ] процесс
- [x] имя
- [ ] синтаксическая ошибка




What is `Nil`?
- [x] процесс
- [ ] имя
- [ ] синтаксическая ошибка



What is `@Nil`?
- [ ] процесс
- [x] имя
- [ ] синтаксическая ошибка




Что такое `@@Nil`?
- [ ] процесс
- [ ] имя
- [x] синтаксическая ошибка


Если`*importantData` -- это процесс, то что тогда `importantData`?
- [ ] процесс
- [x] имя
- [ ] синтаксическая ошибка



  Что из следующего эквивалентно `"BobsPhone"`?
- [x] `*@"BobsPhone"`
- [ ] `@"BobsPhone"`
- [ ] `*"BobsPhone"`
- [ ] `@*BobsPhone`
- [ ] `result!("BobsPhone")`



### Упражнение

![This telephone game has a fork](telephoneFork.png)

Давайте отойдем от линейной игры, где каждый передает сообщение следующему, и напишем вариант с ветвлением. В этот раз Боб отправит сообщение и Чарли, и ещё Элизе.
Каждая ветвь может быть настолько длинной, насколько захотите, но в конце каждой ветви выведите сообщение на `stdout`.
